/*! match-file-utility 2016-01-28 */
function matchFile(a,b){return matchFile.chain(a,b)}fs=require("fs"),path=require("path"),matchFile.fn={},"object"==typeof module&&(module.exports=matchFile),matchFile.fn.pipe=function(a,b,c){for(var d,e,f=matchFile.find(b,c),g=0,h=a.operations.length;h>g;g++)d=matchFile.fn[a.operations[g].name],e=a.operations[g].arguments,a.value=a.value.concat(d.apply(null,[f].concat(e)));return a.value},matchFile.fn.rename=function(a,b){return a.forEach(function(a,c){var d=b.replace(/\$([a-zA-Z0-9]+)/g,function(a,b){return"dir"===b?path.dirname(b):"filename"===b?path.basename(b):isNaN(Number(b))?void 0:m[Number(b+1)]});fs.rename(a,d),fileObject[c]=d}),a},matchFile.fn.smartSort=function(a){function b(a,b){return a.length>2&&a.length===b.length&&a.slice(0,-2).join("")===b.slice(0,-2).join("")?"min"===a.slice(-2)[0]?-1:"min"===b.slice(-2)[0]?1:a.slice(-2).join("")>b.slice(-2).join("")?1:a.slice(-2).join("")<b.slice(-2).join("")?-1:0:a.join("")>b.join("")?1:-1}function c(a,c){var d=path.dirname(a),e=path.dirname(c),f=path.basename(a),g=path.basename(c),h=f.match(/[a-zA-Z0-9]+/g),i=g.match(/[a-zA-Z0-9]+/g);return d===e?/^init\.[a-z]+$/.test(f)?1:/^init\.[a-z]+$/.test(g)?-1:h.length===i.length?b(h,i):h.length>i.length?1:h.length<i.length?-1:f>g?1:-1:d>e?1:-1}return a.sort(function(a,b){var d=a.split(path.sep).length,e=b.split(path.sep).length;return d!==e?d-e:c(a,b)}),a},function(){var a={value:[],operations:[]};matchFile.find=function(a,b){function c(a){var e=fs.readdirSync(a);e.forEach(function(e){var f,g=path.join(a,e);fs.lstatSync(g).isDirectory()?c(g):b.test(e)&&(f=e.match(b),f.length>1&&(f=f.slice(1)),d.push(g))})}var d=[];return c(a),d},matchFile.chain=function(b,c){return a.value=matchFile.find(b,c),a};for(var b in matchFile.fn)a[b]=function(b){return function(){return"pipe"===b?a.value=matchFile.fn[b].apply(null,[a].concat([].slice.call(arguments))):(a.operations.push({name:b,arguments:[].slice.call(arguments)}),a.value=matchFile.fn[b].apply(null,[a.value].concat([].slice.call(arguments)))),a}}(b)}();