/*! match-file-utility 2016-01-27 */
function matchFile(a,b){return matchFile.chain(a,b)}fs=require("fs"),path=require("path"),matchFile.fn={},"object"==typeof module&&(module.exports=matchFile),matchFile.fn.rename=function(a,b){a.forEach(function(a,c){var d=b.replace(/\$([a-zA-Z0-9]+)/g,function(a,b){return"dir"===b?path.dirname(b):"filename"===b?path.basename(b):isNaN(Number(b))?void 0:m[Number(b+1)]});fs.rename(a,d),fileObject[c]=d})},matchFile.fn.smartSort=function(a){function b(a,b){var c=path.dirname(a),d=path.dirname(b),e=path.basename(a),f=path.basename(b);return c===d?/^init\.[a-z]+$/.test(e)?1:/^init\.[a-z]+$/.test(f)?-1:e.length>f.length?1:e.length<f.length?-1:a.filename>b.filename?1:-1:c>d?1:-1}a.sort(function(a,c){var d=a.split(path.sep).length,e=c.split(path.sep).length;return d!==e?d-e:b(a,c)})},function(){var a=[];matchFile.chain=function(b,c){function d(b){var e=fs.readdirSync(b);e.forEach(function(e){var f,g=path.join(b,e);fs.lstatSync(g).isDirectory()?d(g):c.test(e)&&(f=e.match(c),f.length>1&&(f=f.slice(1)),a.push(g))})}return a.splice(0),d(b),a};for(var b in matchFile.fn)a[b]=function(b){return function(){return matchFile.fn[b].apply(null,[a].concat([].slice.call(arguments))),a}}(b)}();